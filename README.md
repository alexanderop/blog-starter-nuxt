# Blog Starter Nuxt - Search Workshop

Welcome to the workshop! You will add full text and semantic search to a Nuxt Content blog.

The Goal is to understand how we can effectively use Search for a blog, from simple keyword searches to fuzzy, semantic, and hybrid searches.

Each exercise has a ready solution branch if you can't continue; feel free to check them out and go to the next exercise. Also, feel free to generate your own branch with your Solution.

The starter branch is the `main`.

If you are new to Vue Nuxt or Nuxt content in general, feel free to start with Exercise 01-keyword, check out the main branch, and start.

If you are more experienced and have already used Nuxt and Nuxt content, you can start with the 3rd exercise to implement the semantic embedding and create a new branch from 02-Fuzzy.

Each exercise has a ready solution branch if you can't continue; feel free to check them out and go to the next exercise. Also feel free to generate your own branch with your Solution. name it:

- `01-keyword-{yourName}`
- `01-keyword`
- `02-fuzzy`
- `03-semantic`
- `04-hybrid`

## ðŸŽ¯ Try the Embedding Demo First!

Before diving into the exercises, run our BGE embedding model demo to understand how semantic search works:

```bash
npm run demo:embeddings
```

This interactive demo shows:
- How text gets converted into 384-dimensional vectors
- How semantic similarity search works with real examples
- Why "What is a panda?" finds panda-related content even without exact keyword matches



## Prerequisites

1. Clone the repo or Fork the Project if you want (https://github.com/alexanderop/blog-starter-nuxt)
    
    ```bash
    git clone https://github.com/alexanderop/blog-starter-nuxt
    cd blog-starter-nuxt
    ```
    
2. Install packages.
    
    ```bash
    npm install     
    ```
    
3. Start the dev server.
    
    ```bash
    npm run dev
    ```
    
4. Open [**http://localhost:3000**](http://localhost:3000/). You should see the blog.

> ðŸ’¡ **Tip:** If you use Cursor, you can ask questions like "How do I do a basic search in Nuxt content." This project has a rule and the complete documentation. You could also copy and paste the full content documentation in an LLM of your choice to ask questions.

## Tips for using the blog

### Shortcuts

Since I love shortcuts, this blog starter incorporates some shortcuts. Just type `?` and you see all shortcuts available.

### SQLite devtools

Since Nuxt Content is using SQLite to transform the .md files of our blogs, I created a simple page to debug it.

Just open http://localhost:3000/debug-sqlite or find the secret shortcut ðŸ˜›. It's essential to note that the SQLite dump is accessible both in the backend and the frontend.

## Exercise Goals

### Goal 1: Keyword Search

- Implement a basic keyword search that looks for matches in the `title` and `content` (or `description`) of blog posts.
- Display the first 20 matching results.
- Create a composable `useKeywordSearch` that will use [queryCollection](https://content.nuxt.com/docs/utils/query-collection) to get our data.
- If you select Keyword, you should then find something if you search for "Vue"

### Goal 2: Fuzzy Search

- Integrate Fuse.js to add typo tolerance (fuzzy matching) to your search.
- Rank results based on Fuse.js's scoring.
- *(Hint: The Nuxt Content documentation might have examples or suggestions for integrating third-party search libraries.)*
- If you search for something like "Vue", you should still get a result back.

### Goal 3: Semantic Search

Enable semantic search using sentence embeddings and cosine similarity.

**Steps:**

- Generate vector embeddings that capture the meaning of each blog post.
- Store these embeddings in the SQLite database generated by Nuxt Content. You can extend the schema using [transformers](https://content.nuxt.com/docs/getting-started/configuration#transformers).
- When a user searches, generate an embedding for the query.
- Compare the query embedding with post embeddings using cosine similarity to find the most relevant results.

**Hint:**

Use a model like [bge-small-en-v1.5](https://huggingface.co/Xenova/bge-small-en-v1.5) to generate the embeddings. For inspiration, you can also check out a blog post about using transformer.js model for translation â†’ https://alexop.dev/posts/building-client-side-ai-translator-vue/

You can always delete the sqlite dump with:

```bash
npm run clean:content
```

### Goal 4: Hybrid Search

Combine **fuzzy search** and **semantic search** to improve relevance.

**How it works:**

1. **Run both searches:**
    - Fuzzy search matches keywords and typos.
    - Semantic search matches meaning using embeddings.
2. **Score and normalize:**
    - Each result gets a fuzzy score and a semantic score.
    - Scores are normalized between 0 and 1.
3. **Calculate hybrid score:**
    - Combine both scores using weighted averaging (e.g. 40% fuzzy, 60% semantic).
4. **Merge and rank:**
    - Combine all results and sort them by the hybrid score.

> ðŸ’¡ **Tip:** You can always be creative and change the UI or add functionalities.

## Workshop Hint â€“ "search" in Nuxt Content v3

> Remember: Nuxt Content doesn't search for you â€“ it just hands you perfectly-chunked data.

1. Call `queryCollectionSearchSections('docs', { ignoredTags: ['code'] })`
   âžœ gets an array of **sections** â†’ `{ id, title, titles[], content, level }`.

2. Feed that array to Fuse.js, MiniSearch, etc. â€“ **your choice** of search engine.

3. Display results; use `titles[]` for breadcrumbs and `level` to rank h1/h2 higher.

That's it: *Nuxt Content extracts, your UI searches.*

## Development

### Setup

Make sure to install dependencies:

```bash
npm install
```

### Development Server

Start the development server on `http://localhost:3000`:

```bash
npm run dev
```

### Production

Build the application for production:

```bash
npm run build
```

Locally preview production build:

```bash
npm run preview
```

Check out the [deployment documentation](https://nuxt.com/docs/getting-started/deployment) for more information.
