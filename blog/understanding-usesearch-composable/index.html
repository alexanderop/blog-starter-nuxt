<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>.custom-scrollbar[data-v-4e624d68]::-webkit-scrollbar{width:8px}.custom-scrollbar[data-v-4e624d68]::-webkit-scrollbar-track{background:#1f2937;border-radius:4px}.custom-scrollbar[data-v-4e624d68]::-webkit-scrollbar-thumb{background:#4b5563;border:2px solid #1f2937;border-radius:4px}.custom-scrollbar[data-v-4e624d68]::-webkit-scrollbar-thumb:hover{background:#6b7280}.custom-scrollbar[data-v-4e624d68]::-webkit-scrollbar-thumb:active{background:#9ca3af}.custom-scrollbar[data-v-4e624d68]{scrollbar-color:#4b5563 #1f2937;scrollbar-width:thin}</style><style>pre code .line{display:block}</style><link rel="stylesheet" href="/_nuxt/entry.gugyvX6w.css" crossorigin><link rel="stylesheet" href="/_nuxt/default.C9HpGtB8.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/blog/understanding-usesearch-composable/_payload.json?2418bfde-544f-4bfa-b983-fe4f37c20790"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Z8lR5SEQ.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CcobsWQ0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CsIPORjC.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B4R3DwPF.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CTaZAx6t.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C4Y1MRGU.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BwB42IbR.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CmtXo4iS.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B9mYT7vo.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DS2W4GFp.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BELCpinh.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/tTODFBZw.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CHI_HJ_2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CaG3ybGv.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BFHVL93P.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BA5b8xwf.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/2418bfde-544f-4bfa-b983-fe4f37c20790.json"><link rel="prefetch" as="style" crossorigin href="/_nuxt/index.BKsJv0if.css"><link rel="prefetch" as="script" crossorigin href="/_nuxt/szZO4_XR.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Bbh6spoV.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Cpj98o6Y.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CpYdWDLt.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/Ds8GYkJX.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/wJRy3DAd.js"><script type="module" src="/_nuxt/Z8lR5SEQ.js" crossorigin></script></head><body><!--teleport start anchor--><!----><!--teleport anchor--><div id="__nuxt"><div><div class="min-h-screen bg-gray-900"><header class="border-b border-gray-700 bg-gray-900"><nav class="max-w-2xl mx-auto px-4 py-6"><div class="flex items-center justify-between"><h1 class="text-lg font-normal"><a href="/" class="text-white hover:underline"> My Blog </a></h1><div class="flex items-center space-x-6"><div class="flex space-x-6"><a href="/" class="text-sm hover:underline text-gray-400"> Home </a><a href="/blog" class="text-sm hover:underline text-white font-medium"> Blog </a><a href="/search" class="text-sm hover:underline text-gray-400"> Search </a></div><button class="flex items-center space-x-1 text-gray-400 hover:text-white transition-colors text-sm group" title="View keyboard shortcuts"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path><rect x="3" y="4" width="18" height="16" rx="2"></rect><path d="M7 8h.01M17 8h.01M7 16h.01M17 16h.01"></path></svg><span class="hidden sm:inline">Shortcuts</span></button></div></div></nav></header><main class="max-w-2xl mx-auto px-4"><!--[--><div class="bg-gray-900"><div class="max-w-2xl mx-auto px-4 py-12"><article class="prose prose-lg prose-gray max-w-none prose-headings:font-normal prose-headings:text-white prose-p:text-gray-200 prose-p:leading-relaxed prose-a:text-blue-400 prose-a:underline hover:prose-a:text-blue-300 hover:prose-a:no-underline prose-strong:text-white prose-code:text-gray-100 prose-code:bg-gray-800 prose-code:px-1 prose-code:py-0.5 prose-code:rounded-sm prose-pre:bg-gray-800 prose-pre:border prose-pre:border-gray-700"><div><h1 id="understanding-the-usesearch-composable"><!--[-->Understanding the useSearch Composable<!--]--></h1><p><!--[-->Building effective search functionality is crucial for content-heavy applications. In this blog, we&#39;ve implemented a powerful <strong><!--[-->custom search composable<!--]--></strong> that provides real-time, scored search results across our content. Let&#39;s dive deep into how it works!<!--]--></p><h2 id="overview"><a href="#overview"><!--[-->Overview<!--]--></a></h2><p><!--[-->The <code><!--[-->useSearch<!--]--></code> composable is a Vue 3 composition function that provides comprehensive search capabilities for our Nuxt Content blog. It handles everything from data fetching to result scoring, debouncing, and text highlighting.<!--]--></p><h2 id="key-features"><a href="#key-features"><!--[-->Key Features<!--]--></a></h2><h3 id="smart-scoring-algorithm"><a href="#smart-scoring-algorithm"><!--[-->🎯 Smart Scoring Algorithm<!--]--></a></h3><p><!--[-->Our search doesn&#39;t just match text—it intelligently scores results:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Title matches<!--]--></strong>: 10 points (highest priority)<!--]--></li><li><!--[--><strong><!--[-->Tag matches<!--]--></strong>: 7 points<!--]--></li><li><!--[--><strong><!--[-->Description matches<!--]--></strong>: 5 points<!--]--></li><li><!--[--><strong><!--[-->Content matches<!--]--></strong>: 3 points (lowest priority)<!--]--></li><!--]--></ul><h3 id="performance-optimizations"><a href="#performance-optimizations"><!--[-->⚡ Performance Optimizations<!--]--></a></h3><ul><!--[--><li><!--[--><strong><!--[-->Debounced search<!--]--></strong>: Prevents excessive API calls during typing<!--]--></li><li><!--[--><strong><!--[-->Async data loading<!--]--></strong>: Non-blocking content fetching<!--]--></li><li><!--[--><strong><!--[-->Result limiting<!--]--></strong>: Configurable maximum results (default: 20)<!--]--></li><!--]--></ul><h3 id="enhanced-ux"><a href="#enhanced-ux"><!--[-->🎨 Enhanced UX<!--]--></a></h3><ul><!--[--><li><!--[--><strong><!--[-->Text highlighting<!--]--></strong>: Search terms are visually highlighted in results<!--]--></li><li><!--[--><strong><!--[-->Content previews<!--]--></strong>: Automatic truncation with ellipsis<!--]--></li><li><!--[--><strong><!--[-->Date formatting<!--]--></strong>: User-friendly date display<!--]--></li><li><!--[--><strong><!--[-->Loading states<!--]--></strong>: Visual feedback during search operations<!--]--></li><!--]--></ul><h2 id="core-architecture"><a href="#core-architecture"><!--[-->Core Architecture<!--]--></a></h2><h3 id="interface-definitions"><a href="#interface-definitions"><!--[-->Interface Definitions<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">interface</span><span class="sCp4m"> SearchSection</span><span class="sCdxs"> {
</span></span><span class="line" line="2"><span class="sCdxs">  id</span><span class="s0Tla">:</span><span class="sCp4m"> string
</span></span><span class="line" line="3"><span class="sCdxs">  title</span><span class="s0Tla">?:</span><span class="sCp4m"> string
</span></span><span class="line" line="4"><span class="sCdxs">  content</span><span class="s0Tla">?:</span><span class="sCp4m"> string
</span></span><span class="line" line="5"><span class="sCdxs">  description</span><span class="s0Tla">?:</span><span class="sCp4m"> string
</span></span><span class="line" line="6"><span class="sCdxs">  tags</span><span class="s0Tla">?:</span><span class="sCp4m"> string</span><span class="sCdxs">[]
</span></span><span class="line" line="7"><span class="sCdxs">  date</span><span class="s0Tla">?:</span><span class="sCp4m"> string
</span></span><span class="line" line="8"><span class="sCdxs">  score</span><span class="s0Tla">?:</span><span class="sCp4m"> number
</span></span><span class="line" line="9"><span class="sCdxs">}
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span class="s0Tla">interface</span><span class="sCp4m"> UseSearchOptions</span><span class="sCdxs"> {
</span></span><span class="line" line="12"><span class="sCdxs">  collection</span><span class="s0Tla">?:</span><span class="seVfx"> &#39;</span><span class="s-mGx">blog</span><span class="seVfx">&#39;
</span></span><span class="line" line="13"><span class="sCdxs">  debounceDelay</span><span class="s0Tla">?:</span><span class="sCp4m"> number
</span></span><span class="line" line="14"><span class="sCdxs">  maxResults</span><span class="s0Tla">?:</span><span class="sCp4m"> number
</span></span><span class="line" line="15"><span class="sCdxs">}
</span></span></code><!--]--></pre><h3 id="the-search-scoring-algorithm"><a href="#the-search-scoring-algorithm"><!--[-->The Search Scoring Algorithm<!--]--></a></h3><p><!--[-->The heart of our search functionality lies in the scoring system:<!--]--></p><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sAOxA"> calculateSearchScore</span><span class="s0Tla"> =</span><span class="sCdxs"> (</span><span class="sGEwX">section</span><span class="s0Tla">:</span><span class="sCp4m"> SearchSection</span><span class="sCdxs">, </span><span class="sGEwX">query</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="sCdxs">)</span><span class="s0Tla">:</span><span class="sCp4m"> number</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="2"><span class="s0Tla">  let</span><span class="sCdxs"> score </span><span class="s0Tla">=</span><span class="sIQBb"> 0
</span></span><span class="line" line="3"><span class="s0Tla">  const</span><span class="sCdxs"> normalizedQuery </span><span class="s0Tla">=</span><span class="sCdxs"> query.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">()
</span></span><span class="line" line="4"><span class="sCdxs">  
</span></span><span class="line" line="5"><span class="s0Tla">  const</span><span class="sCdxs"> titleMatch </span><span class="s0Tla">=</span><span class="sCdxs"> section.title?.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">().</span><span class="sAOxA">includes</span><span class="sCdxs">(normalizedQuery)
</span></span><span class="line" line="6"><span class="s0Tla">  const</span><span class="sCdxs"> contentMatch </span><span class="s0Tla">=</span><span class="sCdxs"> section.content?.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">().</span><span class="sAOxA">includes</span><span class="sCdxs">(normalizedQuery)
</span></span><span class="line" line="7"><span class="s0Tla">  const</span><span class="sCdxs"> descriptionMatch </span><span class="s0Tla">=</span><span class="sCdxs"> section.description?.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">().</span><span class="sAOxA">includes</span><span class="sCdxs">(normalizedQuery)
</span></span><span class="line" line="8"><span class="s0Tla">  const</span><span class="sCdxs"> tagMatch </span><span class="s0Tla">=</span><span class="sCdxs"> section.tags?.</span><span class="sAOxA">some</span><span class="sCdxs">(</span><span class="sGEwX">tag</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> tag.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">().</span><span class="sAOxA">includes</span><span class="sCdxs">(normalizedQuery))
</span></span><span class="line" line="9"><span class="sCdxs">  
</span></span><span class="line" line="10"><span class="s0Tla">  if</span><span class="sCdxs"> (titleMatch) score </span><span class="s0Tla">+=</span><span class="sIQBb"> 10
</span></span><span class="line" line="11"><span class="s0Tla">  if</span><span class="sCdxs"> (descriptionMatch) score </span><span class="s0Tla">+=</span><span class="sIQBb"> 5
</span></span><span class="line" line="12"><span class="s0Tla">  if</span><span class="sCdxs"> (contentMatch) score </span><span class="s0Tla">+=</span><span class="sIQBb"> 3
</span></span><span class="line" line="13"><span class="s0Tla">  if</span><span class="sCdxs"> (tagMatch) score </span><span class="s0Tla">+=</span><span class="sIQBb"> 7
</span></span><span class="line" line="14"><span class="sCdxs">  
</span></span><span class="line" line="15"><span class="s0Tla">  return</span><span class="sCdxs"> score
</span></span><span class="line" line="16"><span class="sCdxs">}
</span></span></code><!--]--></pre><p><!--[-->This scoring system ensures that:<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Titles<!--]--></strong> get the highest priority (users often search for specific topics)<!--]--></li><li><!--[--><strong><!--[-->Tags<!--]--></strong> are highly valued (they represent key categories)<!--]--></li><li><!--[--><strong><!--[-->Descriptions<!--]--></strong> provide good context matching<!--]--></li><li><!--[--><strong><!--[-->Content<!--]--></strong> matches are included but weighted lower (to avoid noise)<!--]--></li><!--]--></ol><h2 id="search-operation-flow"><a href="#search-operation-flow"><!--[-->Search Operation Flow<!--]--></a></h2><h3 id="_1-data-fetching"><a href="#_1-data-fetching"><!--[-->1. Data Fetching<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sCdxs"> { data</span><span class="s0Tla">:</span><span class="sCdxs"> searchData } </span><span class="s0Tla">=</span><span class="s0Tla"> await</span><span class="sAOxA"> useAsyncData</span><span class="sCdxs">(</span><span class="s-mGx">`search-sections-</span><span class="s0Tla">${</span><span class="sCdxs">collection</span><span class="s0Tla">}</span><span class="s-mGx">`</span><span class="sCdxs">, () </span><span class="s0Tla">=&gt;</span><span class="sCdxs"> 
</span></span><span class="line" line="2"><span class="sAOxA">  queryCollectionSearchSections</span><span class="sCdxs">(collection)
</span></span><span class="line" line="3"><span class="sCdxs">)
</span></span></code><!--]--></pre><p><!--[-->The composable uses Nuxt&#39;s <code><!--[-->useAsyncData<!--]--></code> to fetch and cache search data efficiently.<!--]--></p><h3 id="_2-search-processing"><a href="#_2-search-processing"><!--[-->2. Search Processing<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sAOxA"> performSearchOperation</span><span class="s0Tla"> =</span><span class="sCdxs"> (
</span></span><span class="line" line="2"><span class="sGEwX">  sections</span><span class="s0Tla">:</span><span class="sCp4m"> SearchSection</span><span class="sCdxs">[], 
</span></span><span class="line" line="3"><span class="sGEwX">  query</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="sCdxs">, 
</span></span><span class="line" line="4"><span class="sGEwX">  maxResults</span><span class="s0Tla">:</span><span class="sCp4m"> number
</span></span><span class="line" line="5"><span class="sCdxs">)</span><span class="s0Tla">:</span><span class="sCp4m"> SearchSection</span><span class="sCdxs">[] </span><span class="s0Tla">=&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="6"><span class="s0Tla">  if</span><span class="sCdxs"> (</span><span class="s0Tla">!</span><span class="sCdxs">query.</span><span class="sAOxA">trim</span><span class="sCdxs">()) </span><span class="s0Tla">return</span><span class="sCdxs"> []
</span></span><span class="line" line="7"><span class="sCdxs">  
</span></span><span class="line" line="8"><span class="s0Tla">  const</span><span class="sCdxs"> normalizedQuery </span><span class="s0Tla">=</span><span class="sCdxs"> query.</span><span class="sAOxA">toLowerCase</span><span class="sCdxs">().</span><span class="sAOxA">trim</span><span class="sCdxs">()
</span></span><span class="line" line="9"><span class="sCdxs">  
</span></span><span class="line" line="10"><span class="s0Tla">  return</span><span class="sCdxs"> sections
</span></span><span class="line" line="11"><span class="sCdxs">    .</span><span class="sAOxA">map</span><span class="sCdxs">(</span><span class="sGEwX">section</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> ({
</span></span><span class="line" line="12"><span class="s0Tla">      ...</span><span class="sCdxs">section,
</span></span><span class="line" line="13"><span class="sCdxs">      score</span><span class="s0Tla">:</span><span class="sAOxA"> calculateSearchScore</span><span class="sCdxs">(section, normalizedQuery)
</span></span><span class="line" line="14"><span class="sCdxs">    }))
</span></span><span class="line" line="15"><span class="sCdxs">    .</span><span class="sAOxA">filter</span><span class="sCdxs">(</span><span class="sGEwX">section</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> section.score </span><span class="s0Tla">&gt;</span><span class="sIQBb"> 0</span><span class="sCdxs">)
</span></span><span class="line" line="16"><span class="sCdxs">    .</span><span class="sAOxA">sort</span><span class="sCdxs">((</span><span class="sGEwX">a</span><span class="sCdxs">, </span><span class="sGEwX">b</span><span class="sCdxs">) </span><span class="s0Tla">=&gt;</span><span class="sCdxs"> b.score </span><span class="s0Tla">-</span><span class="sCdxs"> a.score)
</span></span><span class="line" line="17"><span class="sCdxs">    .</span><span class="sAOxA">slice</span><span class="sCdxs">(</span><span class="sIQBb">0</span><span class="sCdxs">, maxResults)
</span></span><span class="line" line="18"><span class="sCdxs">}
</span></span></code><!--]--></pre><p><!--[-->The search process:<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Normalizes<!--]--></strong> the query (lowercase, trimmed)<!--]--></li><li><!--[--><strong><!--[-->Scores<!--]--></strong> each section<!--]--></li><li><!--[--><strong><!--[-->Filters<!--]--></strong> out zero-score results<!--]--></li><li><!--[--><strong><!--[-->Sorts<!--]--></strong> by score (highest first)<!--]--></li><li><!--[--><strong><!--[-->Limits<!--]--></strong> results to prevent overwhelming the UI<!--]--></li><!--]--></ol><h3 id="_3-debounced-execution"><a href="#_3-debounced-execution"><!--[-->3. Debounced Execution<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sAOxA"> createDebouncedFunction</span><span class="s0Tla"> =</span><span class="sCdxs"> (</span><span class="sAOxA">fn</span><span class="s0Tla">:</span><span class="sCdxs"> () </span><span class="s0Tla">=&gt;</span><span class="sCp4m"> void</span><span class="sCdxs">, </span><span class="sGEwX">delay</span><span class="s0Tla">:</span><span class="sCp4m"> number</span><span class="sCdxs">) </span><span class="s0Tla">=&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="2"><span class="s0Tla">  let</span><span class="sCdxs"> timeoutId</span><span class="s0Tla">:</span><span class="sCp4m"> NodeJS</span><span class="sCdxs">.</span><span class="sCp4m">Timeout
</span></span><span class="line" line="3"><span class="s0Tla">  return</span><span class="sCdxs"> () </span><span class="s0Tla">=&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="4"><span class="sAOxA">    clearTimeout</span><span class="sCdxs">(timeoutId)
</span></span><span class="line" line="5"><span class="sCdxs">    timeoutId </span><span class="s0Tla">=</span><span class="sAOxA"> setTimeout</span><span class="sCdxs">(fn, delay)
</span></span><span class="line" line="6"><span class="sCdxs">  }
</span></span><span class="line" line="7"><span class="sCdxs">}
</span></span></code><!--]--></pre><p><!--[-->Debouncing prevents excessive search operations while the user is typing, improving performance and user experience.<!--]--></p><h2 id="text-processing-features"><a href="#text-processing-features"><!--[-->Text Processing Features<!--]--></a></h2><h3 id="content-preview-generation"><a href="#content-preview-generation"><!--[-->Content Preview Generation<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sAOxA"> createContentPreview</span><span class="s0Tla"> =</span><span class="sCdxs"> (</span><span class="sGEwX">content</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="sCdxs">)</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="2"><span class="s0Tla">  if</span><span class="sCdxs"> (</span><span class="s0Tla">!</span><span class="sCdxs">content) </span><span class="s0Tla">return</span><span class="seVfx"> &#39;&#39;
</span></span><span class="line" line="3"><span class="s0Tla">  const</span><span class="sCdxs"> cleaned </span><span class="s0Tla">=</span><span class="sCdxs"> content.</span><span class="sAOxA">replace</span><span class="sCdxs">(</span><span class="s-doY">/</span><span class="sLL85">[</span><span class="s-mGx">#*`</span><span class="sLL85">]</span><span class="s-doY">/</span><span class="s0Tla">g</span><span class="sCdxs">, </span><span class="seVfx">&#39;&#39;</span><span class="sCdxs">).</span><span class="sAOxA">trim</span><span class="sCdxs">()
</span></span><span class="line" line="4"><span class="s0Tla">  return</span><span class="sCdxs"> cleaned.length </span><span class="s0Tla">&gt;</span><span class="sIQBb"> 150</span><span class="s0Tla"> ?</span><span class="sCdxs"> cleaned.</span><span class="sAOxA">substring</span><span class="sCdxs">(</span><span class="sIQBb">0</span><span class="sCdxs">, </span><span class="sIQBb">150</span><span class="sCdxs">) </span><span class="s0Tla">+</span><span class="seVfx"> &#39;</span><span class="s-mGx">...</span><span class="seVfx">&#39;</span><span class="s0Tla"> :</span><span class="sCdxs"> cleaned
</span></span><span class="line" line="5"><span class="sCdxs">}
</span></span></code><!--]--></pre><p><!--[-->This function:<!--]--></p><ul><!--[--><li><!--[-->Removes Markdown formatting characters<!--]--></li><li><!--[-->Truncates long content to 150 characters<!--]--></li><li><!--[-->Adds ellipsis for truncated content<!--]--></li><!--]--></ul><h3 id="text-highlighting"><a href="#text-highlighting"><!--[-->Text Highlighting<!--]--></a></h3><pre class="language-typescript shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="s0Tla">const</span><span class="sAOxA"> createHighlightedText</span><span class="s0Tla"> =</span><span class="sCdxs"> (</span><span class="sGEwX">text</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="sCdxs">, </span><span class="sGEwX">query</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="sCdxs">)</span><span class="s0Tla">:</span><span class="sCp4m"> string</span><span class="s0Tla"> =&gt;</span><span class="sCdxs"> {
</span></span><span class="line" line="2"><span class="s0Tla">  if</span><span class="sCdxs"> (</span><span class="s0Tla">!</span><span class="sCdxs">text </span><span class="s0Tla">||</span><span class="s0Tla"> !</span><span class="sCdxs">query) </span><span class="s0Tla">return</span><span class="sCdxs"> text
</span></span><span class="line" line="3"><span class="sCdxs">  
</span></span><span class="line" line="4"><span class="s0Tla">  const</span><span class="sCdxs"> escapedText </span><span class="s0Tla">=</span><span class="sAOxA"> escapeHtml</span><span class="sCdxs">(text)
</span></span><span class="line" line="5"><span class="s0Tla">  const</span><span class="sCdxs"> escapedQuery </span><span class="s0Tla">=</span><span class="sAOxA"> escapeHtml</span><span class="sCdxs">(query.</span><span class="sAOxA">trim</span><span class="sCdxs">())
</span></span><span class="line" line="6"><span class="sCdxs">  
</span></span><span class="line" line="7"><span class="s0Tla">  if</span><span class="sCdxs"> (</span><span class="s0Tla">!</span><span class="sCdxs">escapedQuery) </span><span class="s0Tla">return</span><span class="sCdxs"> escapedText
</span></span><span class="line" line="8"><span class="sCdxs">  
</span></span><span class="line" line="9"><span class="s0Tla">  const</span><span class="sCdxs"> regex </span><span class="s0Tla">=</span><span class="sviCg"> new</span><span class="sAOxA"> RegExp</span><span class="sCdxs">(</span><span class="s-mGx">`(</span><span class="s0Tla">${</span><span class="sCdxs">escapedQuery.</span><span class="sAOxA">replace</span><span class="sCdxs">(</span><span class="s-doY">/</span><span class="sLL85">[</span><span class="sIQBb">.</span><span class="s-mGx">*+?^${}()|[\]\\</span><span class="sLL85">]</span><span class="s-doY">/</span><span class="s0Tla">g</span><span class="s-mGx">, </span><span class="seVfx">&#39;</span><span class="s0Tla">\\</span><span class="s-mGx">$&amp;</span><span class="seVfx">&#39;</span><span class="sCdxs">)</span><span class="s0Tla">}</span><span class="s-mGx">)`</span><span class="sCdxs">, </span><span class="seVfx">&#39;</span><span class="s-mGx">gi</span><span class="seVfx">&#39;</span><span class="sCdxs">)
</span></span><span class="line" line="10"><span class="sCdxs">  
</span></span><span class="line" line="11"><span class="s0Tla">  return</span><span class="sCdxs"> escapedText.</span><span class="sAOxA">replace</span><span class="sCdxs">(regex, </span><span class="seVfx">&#39;</span><span class="s-mGx">&lt;mark class=&quot;bg-yellow-400 text-gray-900 px-1 rounded&quot;&gt;$1&lt;/mark&gt;</span><span class="seVfx">&#39;</span><span class="sCdxs">)
</span></span><span class="line" line="12"><span class="sCdxs">}
</span></span></code><!--]--></pre><p><!--[-->The highlighting feature:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Escapes HTML<!--]--></strong> to prevent XSS attacks<!--]--></li><li><!--[--><strong><!--[-->Escapes regex<!--]--></strong> special characters<!--]--></li><li><!--[--><strong><!--[-->Case-insensitive<!--]--></strong> matching<!--]--></li><li><!--[--><strong><!--[-->Applies styling<!--]--></strong> with Tailwind CSS classes<!--]--></li><!--]--></ul><h2 id="usage-example"><a href="#usage-example"><!--[-->Usage Example<!--]--></a></h2><pre class="language-vue shiki shiki-themes dracula" style=""><!--[--><code><span class="line" line="1"><span class="sCdxs">&lt;</span><span class="s0Tla">script</span><span class="sY_PY"> setup</span><span class="sCdxs">&gt;
</span></span><span class="line" line="2"><span class="s0Tla">const</span><span class="sCdxs"> { 
</span></span><span class="line" line="3"><span class="sCdxs">  searchQuery, 
</span></span><span class="line" line="4"><span class="sCdxs">  searchResults, 
</span></span><span class="line" line="5"><span class="sCdxs">  isLoading, 
</span></span><span class="line" line="6"><span class="sCdxs">  handleSearch, 
</span></span><span class="line" line="7"><span class="sCdxs">  clearSearch,
</span></span><span class="line" line="8"><span class="sCdxs">  highlightText,
</span></span><span class="line" line="9"><span class="sCdxs">  getContentPreview,
</span></span><span class="line" line="10"><span class="sCdxs">  formatDate 
</span></span><span class="line" line="11"><span class="sCdxs">} </span><span class="s0Tla">=</span><span class="s0Tla"> await</span><span class="sAOxA"> useSearch</span><span class="sCdxs">({
</span></span><span class="line" line="12"><span class="sCdxs">  collection</span><span class="s0Tla">:</span><span class="seVfx"> &#39;</span><span class="s-mGx">blog</span><span class="seVfx">&#39;</span><span class="sCdxs">,
</span></span><span class="line" line="13"><span class="sCdxs">  debounceDelay</span><span class="s0Tla">:</span><span class="sIQBb"> 300</span><span class="sCdxs">,
</span></span><span class="line" line="14"><span class="sCdxs">  maxResults</span><span class="s0Tla">:</span><span class="sIQBb"> 10
</span></span><span class="line" line="15"><span class="sCdxs">})
</span></span><span class="line" line="16"><span class="sCdxs">&lt;/</span><span class="s0Tla">script</span><span class="sCdxs">&gt;
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span class="sCdxs">&lt;</span><span class="s0Tla">template</span><span class="sCdxs">&gt;
</span></span><span class="line" line="19"><span class="sCdxs">  &lt;</span><span class="s0Tla">div</span><span class="sCdxs">&gt;
</span></span><span class="line" line="20"><span class="sCdxs">    &lt;</span><span class="s0Tla">input</span><span class="sCdxs"> 
</span></span><span class="line" line="21"><span class="sY_PY">      v-model</span><span class="s0Tla">=</span><span class="seVfx">&quot;</span><span class="sCdxs">searchQuery</span><span class="seVfx">&quot;</span><span class="sCdxs"> 
</span></span><span class="line" line="22"><span class="sCdxs">      @</span><span class="sY_PY">input</span><span class="s0Tla">=</span><span class="seVfx">&quot;</span><span class="sCdxs">handleSearch</span><span class="seVfx">&quot;
</span></span><span class="line" line="23"><span class="sY_PY">      placeholder</span><span class="s0Tla">=</span><span class="seVfx">&quot;</span><span class="s-mGx">Search posts...</span><span class="seVfx">&quot;
</span></span><span class="line" line="24"><span class="sCdxs">    /&gt;
</span></span><span class="line" line="25"><span class="sCdxs">    
</span></span><span class="line" line="26"><span class="sCdxs">    &lt;</span><span class="s0Tla">div</span><span class="s0Tla"> v-if=</span><span class="seVfx">&quot;</span><span class="sCdxs">isLoading</span><span class="seVfx">&quot;</span><span class="sCdxs">&gt;Searching...&lt;/</span><span class="s0Tla">div</span><span class="sCdxs">&gt;
</span></span><span class="line" line="27"><span class="sCdxs">    
</span></span><span class="line" line="28"><span class="sCdxs">    &lt;</span><span class="s0Tla">div</span><span class="s0Tla"> v-for=</span><span class="seVfx">&quot;</span><span class="sCdxs">result </span><span class="s0Tla">in</span><span class="sCdxs"> searchResults</span><span class="seVfx">&quot;</span><span class="sCdxs"> :</span><span class="sY_PY">key</span><span class="s0Tla">=</span><span class="seVfx">&quot;</span><span class="sCdxs">result.id</span><span class="seVfx">&quot;</span><span class="sCdxs">&gt;
</span></span><span class="line" line="29"><span class="sCdxs">      &lt;</span><span class="s0Tla">h3</span><span class="sY_PY"> v-html</span><span class="s0Tla">=</span><span class="seVfx">&quot;</span><span class="sAOxA">highlightText</span><span class="sCdxs">(result.title, searchQuery)</span><span class="seVfx">&quot;</span><span class="sVm5P"> /</span><span class="sCdxs">&gt;
</span></span><span class="line" line="30"><span class="sCdxs">      &lt;</span><span class="s0Tla">p</span><span class="sCdxs">&gt;</span><span class="s0Tla">{{</span><span class="sAOxA"> getContentPreview</span><span class="sCdxs">(result.content) </span><span class="s0Tla">}}</span><span class="sCdxs">&lt;/</span><span class="s0Tla">p</span><span class="sCdxs">&gt;
</span></span><span class="line" line="31"><span class="sCdxs">      &lt;</span><span class="s0Tla">small</span><span class="sCdxs">&gt;</span><span class="s0Tla">{{</span><span class="sAOxA"> formatDate</span><span class="sCdxs">(result.date) </span><span class="s0Tla">}}</span><span class="sCdxs">&lt;/</span><span class="s0Tla">small</span><span class="sCdxs">&gt;
</span></span><span class="line" line="32"><span class="sCdxs">    &lt;/</span><span class="s0Tla">div</span><span class="sCdxs">&gt;
</span></span><span class="line" line="33"><span class="sCdxs">  &lt;/</span><span class="s0Tla">div</span><span class="sCdxs">&gt;
</span></span><span class="line" line="34"><span class="sCdxs">&lt;/</span><span class="s0Tla">template</span><span class="sCdxs">&gt;
</span></span></code><!--]--></pre><h2 id="benefits-of-this-approach"><a href="#benefits-of-this-approach"><!--[-->Benefits of This Approach<!--]--></a></h2><h3 id="relevance-based-results"><a href="#relevance-based-results"><!--[-->🔍 <strong><!--[-->Relevance-Based Results<!--]--></strong><!--]--></a></h3><p><!--[-->Unlike simple text matching, our scoring system ensures the most relevant content appears first.<!--]--></p><h3 id="performance-optimized"><a href="#performance-optimized"><!--[-->🚀 <strong><!--[-->Performance Optimized<!--]--></strong><!--]--></a></h3><p><!--[-->Debouncing and result limiting keep the search responsive even with large content collections.<!--]--></p><h3 id="️-security-conscious"><a href="#️-security-conscious"><!--[-->🛡️ <strong><!--[-->Security Conscious<!--]--></strong><!--]--></a></h3><p><!--[-->HTML escaping prevents XSS attacks when highlighting search terms.<!--]--></p><h3 id="uiux-focused"><a href="#uiux-focused"><!--[-->🎨 <strong><!--[-->UI/UX Focused<!--]--></strong><!--]--></a></h3><p><!--[-->Built-in text highlighting, content previews, and loading states enhance the user experience.<!--]--></p><h3 id="highly-configurable"><a href="#highly-configurable"><!--[-->🔧 <strong><!--[-->Highly Configurable<!--]--></strong><!--]--></a></h3><p><!--[-->Customizable debounce delays, result limits, and collection targeting make it adaptable to different use cases.<!--]--></p><h2 id="conclusion"><a href="#conclusion"><!--[-->Conclusion<!--]--></a></h2><p><!--[-->The <code><!--[-->useSearch<!--]--></code> composable demonstrates how thoughtful architecture can create powerful, user-friendly search functionality. By combining Vue 3&#39;s composition API with smart scoring algorithms and performance optimizations, we&#39;ve built a search system that&#39;s both powerful and pleasant to use.<!--]--></p><p><!--[-->The modular design makes it easy to extend—you could add features like search history, autocomplete suggestions, or even more sophisticated scoring algorithms based on user behavior.<!--]--></p><p><!--[-->Want to see this in action? Try searching for any term in our blog&#39;s search bar above! 🔍<!--]--></p><style>html pre.shiki code .s0Tla, html code.shiki .s0Tla{--shiki-default:#FF79C6}html pre.shiki code .sCp4m, html code.shiki .sCp4m{--shiki-default:#8BE9FD;--shiki-default-font-style:italic}html pre.shiki code .sCdxs, html code.shiki .sCdxs{--shiki-default:#F8F8F2}html pre.shiki code .seVfx, html code.shiki .seVfx{--shiki-default:#E9F284}html pre.shiki code .s-mGx, html code.shiki .s-mGx{--shiki-default:#F1FA8C}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sAOxA, html code.shiki .sAOxA{--shiki-default:#50FA7B}html pre.shiki code .sGEwX, html code.shiki .sGEwX{--shiki-default:#FFB86C;--shiki-default-font-style:italic}html pre.shiki code .sIQBb, html code.shiki .sIQBb{--shiki-default:#BD93F9}html pre.shiki code .s-doY, html code.shiki .s-doY{--shiki-default:#FF5555}html pre.shiki code .sLL85, html code.shiki .sLL85{--shiki-default:#8BE9FD}html pre.shiki code .sviCg, html code.shiki .sviCg{--shiki-default:#FF79C6;--shiki-default-font-weight:bold}html pre.shiki code .sY_PY, html code.shiki .sY_PY{--shiki-default:#50FA7B;--shiki-default-font-style:italic}html pre.shiki code .sVm5P, html code.shiki .sVm5P{--shiki-default:#FF5555;--shiki-default-font-style:italic;--shiki-default-text-decoration:underline}</style></div></article></div></div><!--]--></main><!--teleport start--><!--teleport end--></div></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/blog/understanding-usesearch-composable/_payload.json?2418bfde-544f-4bfa-b983-fe4f37c20790">[{"state":1,"once":4,"_errors":5,"serverRendered":7,"path":8,"prerenderedAt":9},["Reactive",2],{"$sshortcuts.isOpen":3},false,["Set"],["ShallowReactive",6],{"/blog/understanding-usesearch-composable":-1},true,"/blog/understanding-usesearch-composable",1749236625377]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},preview:{api:"https://api.nuxt.studio",iframeMessagingAllowedOrigins:""}},app:{baseURL:"/",buildId:"2418bfde-544f-4bfa-b983-fe4f37c20790",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>